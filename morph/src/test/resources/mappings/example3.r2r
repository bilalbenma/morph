@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xyz: <http://example.com/ns#> .
@prefix dept: <http://www.example.com/dept#> .
@prefix emp: <http://www.example.com/emp#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <http://es.upm.fi.dia.oeg/R2RMapping#> . 
:TriplesMap2
    a rr:TriplesMap;
    rr:logicalTable """
       Select CONCAT('<xyz.com/emp/', empno,'>') AS empURI
            , empno
            , ename
            , CONCAT('<xyz.com/emp/job/', job,'>') AS jobTypeURI
            , job
            , deptno
            , CONCAT('<xyz.com/emp/etype/', etype,'>') AS empTypeURI
            , etype
            , CONCAT('<xyz.com/graph/', job , '/' , etype,'>') AS graphURI
       from emp
       """;
    rr:class xyz:emp;
    rr:subjectMap [ rr:column "empURI" ];
		
    rr:rowGraph "graphURI";
		
    rr:propertyObjectMap [ rr:RDFTypeProperty emp:jobtype; rr:column "jobTypeURI" ];
    rr:propertyObjectMap [ rr:RDFTypeProperty emp:emptype; rr:column "empTypeURI" ];
		
    rr:propertyObjectMap [ rr:property emp:empno; rr:column "empno" ];
    rr:propertyObjectMap [ rr:property emp:name; rr:column "ename"; rr:columnGraphIRI emp:empNameGraph ];
    rr:propertyObjectMap [ rr:property emp:job; rr:column "job" ];
    rr:propertyObjectMap [ rr:property emp:deptNum; rr:column "deptno" ];
    rr:propertyObjectMap [ rr:property emp:etype; rr:column "etype" ];
    rr:foreignKeyMap [
      rr:key emp:c_ref_deptno;
      rr:parentTriplesMap xyz:dept;
      rr:joinCondition "{child.}deptno = {parent.}deptno";
    ];
    .